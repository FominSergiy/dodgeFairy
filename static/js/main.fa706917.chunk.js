(this.webpackJsonpdoge_mage=this.webpackJsonpdoge_mage||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(7),s=n.n(o),a=(n(29),n(30),n(4)),i=n(2),u=n(9),d="./mage.gif",l="./dodg.gif",O="sergey",j={37:{type:"MOVE_LEFT",posChange:1,pressed:!1},38:{type:"MOVE_UP",posChange:5,pressed:!1},39:{type:"MOVE_RIGHT",posChange:-1,pressed:!1},40:{type:"MOVE_DOWN",posChange:-5,pressed:!1}},b={1:[0,5,10,15,20],5:[0,1,2,3,4],"-1":[4,9,14,19,24],"-5":[20,21,22,23,24]},h=n(3),f=n(0),m=function(e){var t=Object(h.b)(),n=Object(h.c)((function(e){return e.swapScoreBoard}));return c.a.useEffect((function(){var e=function(e){13===e.keyCode&&!n&&t({type:"RESET"})};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t,n]),Object(f.jsxs)("div",{className:"game-board",children:[Object(f.jsxs)("div",{className:"board lost",children:[Object(f.jsx)("img",{src:e.img,style:{width:"25%",height:"25%"},alt:"nothing"}),e.renderScore]}),Object(f.jsx)("button",{className:"resetButton",onClick:function(){return t({type:"RESET"})},children:"restart"})]})},g=n(14),v=n(24),E=function(e,t){var n=parseInt(e.Score),r=parseInt(t.Score);return n>r?-1:n===r?0:n<r?1:void 0},p=function(e,t,n){var r,c=!1;if(null===t)return[c,r];if(0===t.length&&0!==e)return[c=!0,r];if(e>=t[0])return[c=!0,r=0];if(!c&&t.length<n&&0!==e)return[c=!0,r];if(0!==t.length)for(var o=function(e){var t=Math.min.apply(Math,Object(v.a)(e)),n=e.reduce((function(e,n){return e+(n===t?1:0)}));return[t,n]}(t),s=Object(u.a)(o,2),a=s[0],i=s[1],d=0;d<t.length-1;d++){if(e<t[d]&&e>=t[d+1]&&e!==a){c=!0,r=d+1;break}if(e===a&&i<1){c=!0,r=d+1;break}}return[c,r]},w=function(e,t,n,r,c,o){if(e.preventDefault(),0===t.trim().length&&alert("You can't submit a blank form!"),/^[a-zA-Z1-9-_*$]+$/.test(t)){var s=prompt("Submitting you score under userName: ".concat(t,"? (yes/no)"));null===s?alert("You are a picky one!\nChange your name or restart the game!"):"yes"===s.toLowerCase()&&(alert("sweet!"),o(S(t,c,"sergey",10)))}else alert("You can only use a-z, A-Z, 1-9, -, _ , * ,$ characters.")},y=function(e){return function(t){t({type:"DECREMENT_COUNTER",timerId:e})}},x=function(e,t){return function(n){(function(e){try{return g.get("https://prodscoreboardapis.azurewebsites.net/api/ReturnTableResults?",{params:{partitionKey:e},headers:{"Access-Control-Allow-Origin":"*"}})}catch(t){console.log("Request was not successful. Error:".concat(t))}})(e).then((function(e){return function(e,t){var n=Object.entries(e),r=[];return n.forEach((function(e){return r.push({User:e[0],Score:parseInt(e[1].Score),RowKey:e[1].TimeStamp})})),r.sort(E),r.slice(0,t)}(e.data,t)})).then((function(e){var t;return n((t=e,function(e){e({type:"SET_SCOREBOARD",scoreBoardRows:t})})),function(e){var t=[];return e.forEach((function(e){return t.push(e.Score)})),t}(e)})).then((function(e){return n((t=e,function(e){e({type:"SET_TOP_SCORES",scores:t})}));var t})).catch((function(e){return alert("Ops! Something is Wrong with the Scoreboard load:".concat(e.message))}))}},S=function(e,t,n,r){return function(c){(function(e,t){console.log("hi");try{return g.get("https://prodscoreboardapis.azurewebsites.net/api/PostNewScore?",{params:{partitionKey:O,userName:e,score:t},headers:{"Access-Control-Allow-Origin":"*"}})}catch(n){console.log("Request was not successful. Error:".concat(n))}})(e,t).then((function(e){if(200===e.status)return e})).then((function(){c(x(n,r))})).then((function(){c(_(!1))})).catch((function(e){return alert("Ops! Something is Wrong with a new score upload:".concat(e.message))}))}},_=function(e){return function(t){t({type:"SWAP_SCOREBOARD",doSwap:e})}},T=function(e,t){return function(n){n({type:t?"BUTTON_KEY_DOWN":"BUTTON_KEY_UP",keyId:e})}},N=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.score})),n=Object(h.c)((function(e){return e.scoreboard})),r=Object(h.c)((function(e){return e.topScores})),o=Object(h.c)((function(e){return e.swapScoreBoard}));c.a.useEffect((function(){p(t,r,10)[0]&&e(_(!0))}),[e,t]);var s=function(e,t){var n=[];return e.forEach((function(e,r){return n.push(Object(f.jsx)(t,{index:r+1,user:e.User,score:e.Score},r+1))})),n}(n,R),a=p(t,r,10)[1];return o?Object(f.jsx)(M,{whichIndex:a,itemAtIndex:n[a],score:t}):Object(f.jsxs)("div",{className:"table",children:[Object(f.jsx)("div",{className:"header",children:"scoreboard"}),Object(f.jsxs)("div",{className:"column-headers",children:[Object(f.jsx)("div",{className:"row-sub",id:"index",children:"Place"}),Object(f.jsx)("div",{className:"row-sub",id:"name",children:"User"}),Object(f.jsx)("div",{className:"row-sub",id:"score",children:"Score"})]}),s]})},R=function(e){return Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"row-sub",id:"index",children:e.index}),Object(f.jsx)("div",{className:"row-sub",id:"name",children:e.user}),Object(f.jsx)("div",{className:"row-sub",id:"score",children:e.score})]})},M=function(e){var t=Object(h.b)(),n=Object(h.c)((function(e){return e.userName}));return c.a.useEffect((function(){var r=function(r){13===r.keyCode&&w(r,n,e.whichIndex,e.itemAtIndex,e.score,t)};return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}),[t,e,n]),Object(f.jsxs)("div",{className:"winner",children:[Object(f.jsx)("div",{className:"congrats",children:Object(f.jsx)("h1",{children:"Congrats on setting a new Record!"})}),Object(f.jsxs)("form",{onSubmit:function(r){return w(r,n,e.whichIndex,e.itemAtIndex,e.score,t)},children:[Object(f.jsxs)("label",{children:["How should we write you down in History?",Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"text",onChange:function(e){return t(function(e){return function(t){t({type:"SET_USER_NAME",userName:e})}}(e.target.value))}})]}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{className:"submit",type:"Submit",children:"submit"})]})]})},P=function e(t,n){var r=Math.pow(n,2),c=Math.floor(Math.random()*r);return c===t?e(t,n):c},C=function(e){var t=k(e);return Object(f.jsxs)("div",{className:"finalScore",children:[Object(f.jsxs)("h2",{children:["Your Score: ",e]}),Object(f.jsx)("h3",{children:t})]})},k=function(e){var t=null;return e>=0&&(t="Try harder next time!"),e>5&&(t="Are you sure you are using keyboard?"),e>10&&(t="Your rocket crashed back on Earth!"),e>20&&(t="I can see DODG high in the sky!"),e>50&&(t="You are really good at this!"),e>75&&(t="TO THE MOOOON!"),t},A=function(e,t,n,r){var c=P(t,e),o=Math.pow(e,2);return[Array(o).fill(null).reduce((function(e,o,s){var u={value:null,id:s,mage:t===s?n:null,coin:c===s?r:null};return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},s,u))}),{}),c]}(5,12,d,l),I=Object(u.a)(A,2),D=I[0],U={mage:12,coin:I[1]},B={time:60,timerId:null},V={};Object.keys(j).forEach((function(e){V[e]={pressed:j[e].pressed}}));var L=n(10),G=n(23),Y=Object(L.b)({squares:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"MOVE_UP":case"MOVE_DOWN":case"MOVE_RIGHT":case"MOVE_LEFT":return Object(i.a)(Object(i.a)({},n),{},(e={},Object(a.a)(e,r.currentMagePos,Object(i.a)(Object(i.a)({},n[r.currentMagePos]),{},{mage:null})),Object(a.a)(e,r.newMagePos,Object(i.a)(Object(i.a)({},n[r.newMagePos]),{},{mage:r.img})),e));case"MOVE_UP_COIN_RESET":case"MOVE_DOWN_COIN_RESET":case"MOVE_RIGHT_COIN_RESET":case"MOVE_LEFT_COIN_RESET":return Object(i.a)(Object(i.a)({},n),{},(t={},Object(a.a)(t,r.currentMagePos,Object(i.a)(Object(i.a)({},n[r.currentMagePos]),{},{mage:null})),Object(a.a)(t,r.newMagePos,Object(i.a)(Object(i.a)({},n[r.newMagePos]),{},{mage:r.img,coin:null})),Object(a.a)(t,r.newCoinPos,Object(i.a)(Object(i.a)({},n[r.newCoinPos]),{},{coin:r.coinImg,mage:null})),t));case"RESET":return D;default:return n}},coinAndMagePos:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE_BOTH":return Object(i.a)(Object(i.a)({},t),{},(e={},Object(a.a)(e,n.coin,n.coinPos),Object(a.a)(e,n.mage,n.magePos),e));case"UPDATE_MAGE_POS":return Object(i.a)(Object(i.a)({},t),{},Object(a.a)({},n.mage,n.position));case"UPDATE_COIN_POS":return Object(i.a)(Object(i.a)({},t),{},Object(a.a)({},n.coin,n.position));case"RESET":return U;default:return t}},gameOver:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAME_OVER":return t.isOver;case"RESET":return!1;default:return e}},score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ONE":return e+t.value;case"RESET":return 0;default:return e}},timer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DECREMENT_COUNTER":return Object(i.a)(Object(i.a)({},e),{},{time:e.time-1,timerId:t.timerId});case"RESET":return B;default:return e}},scoreboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SCOREBOARD":return t.scoreBoardRows;default:return e}},topScores:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOP_SCORES":return t.scores;default:return e}},swapScoreBoard:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWAP_SCOREBOARD":return t.doSwap;case"RESET":return!1;default:return e}},userName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_NAME":return t.userName;case"RESET":return"";default:return e}},keysPressed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"BUTTON_KEY_DOWN":return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},t.keyId,{pressed:!0}));case"BUTTON_KEY_UP":return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},t.keyId,{pressed:!1}));case"RESET":return V;default:return e}}}),q=Object(L.c)(Y,Object(L.a)(G.a)),W=function(e){var t=e.squareObj,n=H("mage",t.mage),r=H("coin",t.coin);return Object(f.jsx)("div",{className:"square",id:e.id,children:n||r})},H=function(e,t){switch(e){case"mage":return t?Object(f.jsx)("img",{src:t,style:{width:"100%",height:"100%"},alt:"mage"}):null;case"coin":return t?Object(f.jsx)("img",{src:t,style:{width:"50%",height:"50%"},alt:"coin"}):null;default:return null}},K=function(e,t,n,r,c,o){60===o&&z(o,c);var s=e.mage,a=r.posChange,i=r.type,u=s-a,d=$(e,a);if(F(s,a))c((function(e){e({type:"GAME_OVER",isOver:!0})}));else if(d){c(function(e,t,n,r,c,o){return function(s){s(function(e,t,n,r,c,o){return{type:"".concat(e,"_COIN_RESET"),currentMagePos:t,newMagePos:n,newCoinPos:r,img:c,coinImg:o}}(e,t,n,r,c,o)),s(function(e,t){return{type:"UPDATE_BOTH",mage:"mage",magePos:e,coin:"coin",coinPos:t}}(n,r)),s({type:"ADD_ONE",value:1})}}(i,s,u,P(u,5),t,n))}else c(function(e,t,n,r){return function(c){c(function(e,t,n,r){return{type:e,currentMagePos:t,newMagePos:n,img:r}}(e,t,n,r)),c({type:"UPDATE_MAGE_POS",mage:"mage",position:n})}}(i,s,u,t))},z=function(e,t){e--,t(y());var n=setTimeout((function r(){0===e?t((function(e){e({type:"GAME_OVER",isOver:!0})})):(e--,n=setTimeout(r,1e3),t(y(n)))}),1e3)},F=function(e,t){return b["".concat(t)].includes(e)},$=function(e,t){return e.mage-t===e.coin},J=function(e){var t=Object(h.b)(),n=Object(h.c)((function(e){return e.keysPressed}));c.a.useEffect((function(){var r=function(e){t(T(e.keyCode,!0))};window.addEventListener("keydown",r);var c=function(e){t(T(e.keyCode,!1))};window.addEventListener("keyup",c);var o=function(r){var c=Z(n),o=j,s=!!Object.keys(o).includes("".concat(r.keyCode));if(c&&s){var a=j["".concat(r.keyCode)];K(e.coinAndMagePos,e.img,e.coinImg,a,t,e.timer)}};return window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",r),window.removeEventListener("keyup",o),window.removeEventListener("keyup",c)}}),[t,e,n]);var r=function(e,t,n){for(var r=Object.keys(e),c=[],o=0;o<r.length;o+=n){for(var s=o+n,a=[],i=o;i<s;i++)a.push(Object(f.jsx)(t,{id:i,squareObj:e[i]},i));c.push(Object(f.jsx)("div",{className:"board-row",children:a},o))}return c}(e.squares,W,5);return Object(f.jsx)("div",{className:e.class,children:r})},Z=function(e){var t=0;return Object.keys(e).forEach((function(n){!0===e[n].pressed&&(t+=1)})),[1===t]},Q=function(){var e=Object(h.c)((function(e){return e.score})),t=Object(h.b)(),n=Object(h.c)((function(e){return e.gameOver})),r=Object(h.c)((function(e){return e.squares})),o=Object(h.c)((function(e){return e.coinAndMagePos})),s=Object(h.c)((function(e){return e.timer.time})),a=Object(h.c)((function(e){return e.timer.timerId})),i=Object(h.c)((function(e){return e.doSwap}));c.a.useEffect((function(){i||t(x(O,10))}),[t,i]);var u=function(e,t,n,r,c,o){if(t){var s=C(c);return Object(f.jsxs)("div",{children:[Object(f.jsx)(m,{img:"./gameOverGirl.png",renderScore:s}),Object(f.jsx)(N,{})]})}return Object(f.jsxs)("div",{className:"game-board",children:[Object(f.jsx)("div",{className:"score",children:Object(f.jsxs)("h2",{children:["Score: ",c]})}),Object(f.jsx)("div",{className:"timer",children:Object(f.jsxs)("h2",{children:["Time: ",o]})}),Object(f.jsx)(e,{class:"board",squares:n,coinAndMagePos:r,img:d,coinImg:l,timer:o})]})}(J,n,r,o,e,s),j=Object(f.jsxs)("div",{className:"instructions",children:[Object(f.jsx)("h1",{children:"Collect all the DOGE!"}),Object(f.jsx)("h2",{children:"Rules:"}),Object(f.jsx)("h3",{children:"1. Use keyboard arrows (\u2190 \u2191 \u2193 \u2192) to move the character"}),Object(f.jsx)("h3",{children:"1. Use Enter key to restart the game"}),Object(f.jsx)("h3",{children:"2. If you move over the edge it's game over"}),Object(f.jsx)("h3",{children:"3. Collect as many DOGE in 60 sec to fly to the moon!"})]});return n&&(clearTimeout(a),j=null),Object(f.jsxs)("div",{className:"game",children:[u,j]})};s.a.render(Object(f.jsx)(h.a,{store:q,children:Object(f.jsx)(Q,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.fa706917.chunk.js.map